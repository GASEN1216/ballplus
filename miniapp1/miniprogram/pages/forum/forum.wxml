<view class="forum-container">
  <!-- 搜索栏和加号按钮 -->
  <view class="search-bar" wx:if="{{showSearchBar}}">
    <input
    class="search-input"
    placeholder="搜索帖子..."
    value="{{searchKeyword}}"
    bindinput="onSearchInput"
    confirm-type="search"
    bindconfirm="onSearchConfirm"
  />
    <image src="/icon/add.png" class="add-button" bindtap="onAddClick" style="transform: rotate({{addButtonRotate}}deg);" />
  </view>

  <!-- 向上箭头按钮 -->
  <view class="up-arrow" wx:if="{{showUpArrow}}" bindtap="onScrollToTop">
    <text>⬆️</text>
  </view>

  <view class="post-list">
  <block wx:for="{{filteredPosts}}" wx:key="id">
    <view class="post-item" bindtap="goToPostDetail" data-id="{{item.id}}">
      <image src="{{item.avatar}}" class="post-avatar" />
      <view class="post-info">
        <text class="post-name">{{item.name}}</text>
        <text class="post-time">{{item.time}}</text>
        <text class="post-title">{{item.title}}</text>
        <text class="post-content">{{item.content}}</text>
      </view>
      <image wx:if="{{item.image}}" src="{{item.image}}" class="post-image" />
      <view class="post-actions" catchtap="preventClose"> <!-- 避免交互 -->
        <view class="action-item disabled">👍 {{item.likes}}</view>
        <view class="action-item disabled">🔄</view>
        <view class="action-item disabled">💬 {{item.comments}}</view>
      </view>
    </view>
  </block>
</view>

</view>


<!-- 发帖弹窗 -->
<view class="post-modal" wx:if="{{showPostModal}}" catchtap="onCancelPost">
  <view class="modal-content" catchtap="preventClose">
    <input placeholder="标题" bindinput="onTitleInput" />
    <textarea placeholder="内容" bindinput="onContentInput"></textarea>
    <button bindtap="onUploadImage">上传图片</button>
    <button class="submit-button" bindtap="onSubmitPost">提交</button>
  </view>
</view>

