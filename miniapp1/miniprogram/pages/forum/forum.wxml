<view class="container">
  <!-- å›ºå®šé¡¶éƒ¨æœç´¢æ åŠåŠ å·æŒ‰é’® -->
  <view class="header">
    <input class="search-input" placeholder="æœç´¢å¸–å­..." value="{{searchKeyword}}" bindinput="onSearchInput" confirm-type="search" bindconfirm="onSearchConfirm" />
    <image class="add-button" src="/icon/add.png" bindtap="onAddClick" style="transform: rotate({{addButtonRotate}}deg);" />
  </view>

  <!-- å¸–å­åˆ—è¡¨åŒºåŸŸ -->
  <view class="post-list">
    <block wx:for="{{filteredPosts}}" wx:key="id">
      <view class="post-item" bindtap="goToPostDetail" data-id="{{item.id}}">
        <!-- å¸–å­å¤´éƒ¨ï¼šå¤´åƒã€æ ‡é¢˜ã€æ—¶é—´ -->
        <view class="post-header">
          <image class="avatar"  catchtap="goToInfo"  src="{{item.avatar}}"  data-userid="{{item.userId}}"></image>
          <view class="header-info">
            <text class="post-name">{{item.name}}</text>
            <text class="level-text">LV.{{item.grade}}</text>
          </view>
        </view>
        <!-- å¸–å­ä¸»ä½“ï¼šä½œè€…ã€å†…å®¹ -->
        <view class="post-body">
          <text class="post-title">{{item.title}}
          </text>
          <text class="post-content">{{item.content}}</text>
        </view>
        <!-- å¸–å­å›¾ç‰‡çš„å®¹å™¨ï¼Œç”¨äºæˆªå–å›¾ç‰‡çš„ä¸€éƒ¨åˆ† -->
        <view wx:if="{{item.image}}" class="post-image-container">
          <!-- å¸–å­å›¾ç‰‡ï¼ˆå¦‚æœå­˜åœ¨ï¼‰ -->
          <image wx:if="{{item.image}}" class="post-image" src="{{item.image}}" catchtap="previewImage" data-url="{{item.image}}" />
        </view>
        <!-- å¸–å­æ“ä½œï¼šç‚¹èµã€è¯„è®º -->
        <view class="post-actions">
          <view class="action-item">ğŸ‘ {{item.likes}}</view>
          <view class="action-item">ğŸ’¬ {{item.comments}}</view>
        </view>
      </view>
    </block>
  </view>

  <!-- å‘ä¸Šè¿”å›æŒ‰é’® -->
  <view class="up-arrow" wx:if="{{showUpArrow}}" bindtap="onScrollToTop">
    <text>â¬†ï¸</text>
  </view>

  <!-- å‘å¸–å¼¹çª— -->
  <view class="modal-overlay" wx:if="{{showPostModal}}" catchtap="onCancelPost">
    <view class="modal-content" catchtap="preventClose">
      <input placeholder="æ ‡é¢˜ï¼ˆ20å­—ä»¥å†…ï¼‰" value="{{newPost.title}}" bindinput="onTitleInput" maxLength="20" />
      <textarea placeholder="å†…å®¹" value="{{newPost.content}}" bindinput="onContentInput" maxlength="10000"></textarea>
      <!-- ä¸Šä¼ å›¾ç‰‡åå±•ç¤ºé¢„è§ˆï¼Œç‚¹å‡»å¯é¢„è§ˆå¤§å›¾ -->
      <image wx:if="{{newPost.image}}" class="upload-preview" src="{{newPost.image}}" bindtap="previewUploadImage" />
      <button class="upload-btn" bindtap="onUploadImage">ä¸Šä¼ å›¾ç‰‡</button>
      <button class="submit-btn" bindtap="onSubmitPost">æäº¤</button>
    </view>
  </view>
</view>