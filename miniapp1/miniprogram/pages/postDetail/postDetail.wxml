<view class="post-detail-container">
  <!-- å¸–å­è¯¦ç»†å†…å®¹ -->
  <view class="post-header">
    <image class="post-author-avatar" src="{{post.avatar}}" />
    <view class="post-meta">
      <text class="post-title">{{post.title}}</text>
      <view class="post-author-info">
        <text class="post-author">ä½œè€…ï¼š{{post.name}}</text>
        <text class="post-time">{{post.time}}</text>
      </view>
    </view>
  </view>

  <!-- å¸–å­å†…å®¹ -->
  <view class="post-content">
    <text class="content-text">{{post.content}}</text>
    <image wx:if="{{post.image}}" src="{{post.image}}" class="post-image" />
  </view>

  <view class="divider"></view>

  <!-- è¯„è®ºåˆ—è¡¨ -->
  <view class="comments-container">
    <block wx:for="{{visibleComments}}" wx:key="id">
      <view class="comment-item">
        <image class="comment-avatar" src="{{item.avatar}}" />
        <view class="comment-info">
          <text class="comment-name">{{item.name}}</text>
          <text class="comment-content">{{item.content}}</text>
        </view>

        <!-- å­è¯„è®º -->
        <view class="sub-comments">
          <block wx:for="{{item.subComments.slice(0, 2)}}" wx:key="id">
            <view class="sub-comment-item" bindtap="goToCommentDetail" data-id="{{item.parentId}}">
              <text class="sub-comment-name">{{item.name}}</text>
              <text class="sub-comment-content">{{item.content}}</text>
            </view>
          </block>
          <view wx:if="{{item.subComments.length > 2}}" class="show-more-sub-comments" bindtap="goToCommentDetail" data-id="{{item.id}}">
            æ˜¾ç¤ºæ›´å¤šå›å¤
          </view>
        </view>
      </view>
    </block>
    <view wx:if="{{showMore}}" class="show-more" bindtap="viewAllComments">æ˜¾ç¤ºæ›´å¤š</view>
  </view>

  <!-- åº•éƒ¨æ“ä½œæ  -->
  <view class="bottom-bar">
    <input class="comment-input" placeholder="ç‚¹æˆ‘å‘è¯„è®º" bindfocus="openReplyPopup" />
    <view class="bottom-actions">
      <view class="action-item">
        <text class="action-icon">ğŸ”„</text>
      </view>
      <view class="action-item">
        <text class="action-icon">ğŸ’¬</text>
        <text class="action-number">{{post.comments || 0}}</text>
      </view>
      <view class="action-item">
        <text class="action-icon">ğŸ‘</text>
        <text class="action-number">{{post.likes || 0}}</text>
      </view>
    </view>
  </view>

  <!-- å›å¤å¼¹çª— -->
  <view class="reply-popup" wx:if="{{showReplyPopup}}">
    <view class="popup-content">
      <text class="reply-title">å›å¤ {{replyTo}}</text>
      <input class="reply-input" bindinput="onReplyInput" />
      <button class="send-button" bindtap="sendReply">å‘é€</button>
    </view>
  </view>
</view>